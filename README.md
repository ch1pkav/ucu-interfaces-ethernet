# Лабораторна робота "Мережева панель пристрою"

В цій лабораторній роботі було було зроблено невелику мережеву панель пристрою. Робота була виконана на STM32F411, яка відображає дані з GPS та BME280, BH1750 через простий веб-інтерфейс

## Як це працює?

Стмка тут виконує роль HTTP-сервера, що надає доступ до даних у двох форматах:
1.  JSON API (`GET /status`), тобто повертає поточні показники датчиків
2.  Web Dashboard (`GET /`) це статична HTML-сторінка, яка опитує API з частотою 1 Гц і відображає дані без потреби перезавантажувати сторінку

### Що було реалізовано:
1. **Ethernet підключення** використання модуля W5500
2. **Наконфігурена мережа** підтримка dhcp з автоматичним переходом на статичну ip, якщо dhcp раптом недоступний
3. **Оновлення даних в реальному часі** постійно оновлюємо сторінку

## Підключення

| Periph | STM32 Pin | Device Pin | Note |
|--------|-----------|------------|------|
| **SPI1** | PA5/PA6/PA7 | W5500 SCK/MISO/MOSI | Ethernet SPI |
| **Eth CS** | PA4 | W5500 SCS | Ethernet Chip Select |
| **SPI2** | PB10/PC3 | SPI TFT SCK/MOSI | SPI LCD Display |
| **LCD CS** | PC5 | LCD CS | LCD Chip Select |
| **LCD DC** | PB0 | LCD DC | LCD Data/Command |
| **LCD RST** | PC4 | LCD RST | LCD Reset |
| **I2C1** | PB6/PB7 | Sensors SCL/SDA | BME280, BH1750 |
| **UART1**| PA9/PA10 | GPS TX/RX | NMEA Data |


## АПІ референс

### GET /status

Повертає json об'єкт зі станом системи

**Приклад відповіді:**

```json
{
  "proto_ver": 1,
  "device_id": "ABC-12345",
  "time_utc": "2025-12-02T15:32:50Z",
  "gps": {
    "lat": 48.4567, 
    "lon": 34.1234, 
    "qual": 2 
  },
  "env": {
    "t_c": 22.5, 
    "rh_pct": 55.0, 
    "p_hpa": 1012.3 
  }
}
```

### GET /index.html

Фронтенд з даними, відображеними вище, отриманими через fetch /status. Оновлюється щосекунди.
